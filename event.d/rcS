# rcS - runlevel compatibility
#
# This task runs the old sysv-rc startup scripts.

start on startup

stop on runlevel

# Note: there can be no previous runlevel here, if we have one it's bad
# information (we enter rc1 not rcS for maintenance).  Run /etc/rc.d/rc
# without information so that it defaults to previous=N runlevel=S.
console output
script
	runlevel --set S >/dev/null || true

	/etc/rc.d/rc.sysinit 
	runlevel --reboot || true
	. /etc/sysconfig/init

	RL="3"
	[ "$GRAPHICAL" = "yes" ] && RL="5"
	for t in $(cat /proc/cmdline); do
		case $t in
			-s|single|S) RL="S" ;;
			[1-9])       RL="$t" ;;
		esac
	done
	telinit $RL
end script
